# Архитектура Telegram Mini App для игры в шашки

## Обзор системы

Приложение состоит из двух основных частей:
1. Фронтенд (React/Vite) - отвечает за пользовательский интерфейс и логику игры
2. Бэкенд (Node.js/Express) - обеспечивает API и WebSocket соединения для многопользовательской игры

## Структура проекта

```
├── backend/                 # Серверная часть
│   ├── controllers/         # Логика обработки запросов
│   ├── models/             # Модели данных (Mongoose)
│   ├── routes/             # Маршруты API
│   ├── middleware/         # Промежуточное ПО
│   ├── config/             # Конфигурация (БД и т.д.)
│   ├── server.js           # Главный файл сервера
│   └── package.json
├── frontend/               # Фронтенд
│   ├── src/                # Исходный код React
│   │   ├── components/     # Компоненты UI
│   │   ├── utils/          # Утилиты (включая ИИ)
│   │   ├── App.jsx         # Главный компонент
│   │   └── main.jsx        # Точка входа
│   ├── public/             # Публичные ресурсы
│   ├── index.html          # Главная HTML страница
│   ├── style.css           # Стили
│   ├── vite.config.js      # Конфигурация Vite
│   └── package.json
├── package.json            # Корневой package.json
└── README.md
```

## Фронтенд архитектура

### Компоненты
- `App.jsx` - Главный компонент, управляющий состоянием игры
- `CheckersBoard.jsx` - Компонент игровой доски
- `GameControls.jsx` - Элементы управления игрой
- `GameInfo.jsx` - Информация об игре и правила
- `InviteSection.jsx` - Секция приглашения друзей

### Утилиты
- `tgIntegration.js` - Интеграция с Telegram Web Apps
- `ai.js` - Алгоритм искусственного интеллекта

## Бэкенд архитектура

### Модели
- `User.js` - Модель пользователя
- `Game.js` - Модель игры

### Контроллеры
- `userController.js` - Обработка операций с пользователями
- `gameController.js` - Обработка игровых операций

### Маршруты
- `/api/users` - Маршруты для работы с пользователями
- `/api/games` - Маршруты для работы с играми

## Игровая логика

### Ход игры
1. Инициализация доски с начальной расстановкой
2. Игроки по очереди делают ходы
3. Проверка допустимости хода
4. Обновление состояния доски
5. Проверка условий победы

### Правила игры
- Шашки ходят по диагонали на одну клетку вперед
- Дамки могут ходить на любое количество клеток по диагонали
- Взятие обязательно - если есть возможность побить фигуру противника, нужно это сделать
- При достижении последней линии шашка становится дамкой

### Искусственный интеллект
- Использует алгоритм минимакс с альфа-бета отсечением
- Оценочная функция учитывает количество фигур и их позиции
- Разные уровни сложности (легкий, средний, сложный) определяют глубину поиска

## Многопользовательская игра

### WebSocket соединения
- Используется Socket.IO для реального времени
- Игроки соединяются в комнаты по ID
- Ходы передаются между игроками в реальном времени

## Интеграция с Telegram

### Telegram Web Apps SDK
- Используется для интеграции с Telegram
- Позволяет управлять интерфейсом Telegram
- Обеспечивает безопасное взаимодействие с ботом